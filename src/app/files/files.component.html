<div class="container-fluid">
  <div *ngIf="expanded" class="row p-2 g-0 overflow-hidden">
    <div class="row text-color">
      <p
        class="col-auto fw-bolder mb-2"
        data-bs-toggle="collapse"
        href="#filesCollapse"
        role="button"
        aria-expanded="true"
        aria-controls="filesCollapse"
        ngxTippy
        data-tippy-content="Click para abrir o cerrar"
        [tippyProps]="tooltipRight"
      >
        Archivos {{ files.length }}
      </p>
    </div>
    <div
      id="filesCollapse"
      class="show"
      *ngFor="let file of files; let i = index"
    >
      <div *ngIf="i % 3 == 0" class="d-grid d-xl-flex justify-content-xl-end">
        <div class="d-grid col m-1" id="folder + i">
          <accordion [isAnimated]="true" class="text-truncate">
            <accordion-group>
              <button
                class="btn justify-content-between d-flex w-100 shadow-none"
                accordion-heading
                type="button"
              >
                <div class="text-color text-truncate pull-left float-left">
                  <i *ngIf="file.isRemoved" class="bi bi-trash-fill me-1"></i
                  >{{ file.name }}
                </div>
                <a class="link-color icon-size" href="{{ getFile(file.name) }}"
                  ><i class="bi bi-cloud-arrow-down-fill"></i
                ></a>
              </button>
              <div class="row">
                <div class="col d-grid">
                  <a
                    href="{{ getFile(file.name) }}"
                    class="btn btn-sm btn-outline-primary"
                    >Descargar<i class="bi bi-cloud-arrow-down-fill ms-1"></i
                  ></a>
                </div>
                <div class="col d-grid">
                  <button
                    class="btn btn-sm btn-outline-success"
                    (click)="fileEmitter('edit', file.name)"
                  >
                    Editar<i class="bi bi-pencil-fill ms-1"></i>
                  </button>
                </div>
                <div class="col d-grid">
                  <button
                    [disabled]="file.isRemoved"
                    class="btn btn-sm btn-outline-color"
                    (click)="fileEmitter('delete', file.name)"
                  >
                    Eliminar<i class="ms-1 bi bi-trash-fill"></i>
                  </button>
                </div>
                <div class="col d-grid" *ngIf="file.isRemoved">
                  <button
                    class="btn btn-sm btn-outline-color"
                    (click)="fileEmitter('recover', file)"
                  >
                    Recuperar<i class="ms-1 bi bi-recycle"></i>
                  </button>
                </div>
              </div>
            </accordion-group>
          </accordion>
        </div>

        <div class="d-grid col m-1" *ngIf="i + 1 < files.length">
          <accordion [isAnimated]="true" class="text-truncate">
            <accordion-group>
              <button
                class="btn justify-content-between d-flex w-100 shadow-none"
                accordion-heading
                type="button"
              >
                <div class="text-color text-truncate pull-left float-left">
                  <i
                    *ngIf="files[i + 1].isRemoved"
                    class="bi bi-trash-fill me-1"
                  ></i
                  >{{ files[i + 1].name }}
                </div>
                <a
                  class="link-color icon-size"
                  href="{{ getFile(files[i + 1].name) }}"
                  ><i class="bi bi-cloud-arrow-down-fill"></i
                ></a>
              </button>
              <div class="row">
                <div class="col d-grid">
                  <a
                    href="{{ getFile(files[i + 1].name) }}"
                    class="btn btn-sm btn-outline-primary"
                    >Descargar<i class="bi bi-cloud-arrow-down-fill ms-1"></i
                  ></a>
                </div>
                <div class="col d-grid">
                  <button
                    class="btn btn-sm btn-outline-success"
                    (click)="fileEmitter('edit', files[i + 1].name)"
                  >
                    Editar<i class="bi bi-pencil-fill ms-1"></i>
                  </button>
                </div>
                <div class="col d-grid">
                  <button
                    [disabled]="files[i + 1].isRemoved"
                    class="btn btn-sm btn-outline-color"
                    (click)="fileEmitter('delete', files[i + 1].name)"
                  >
                    Eliminar<i class="ms-1 bi bi-trash-fill"></i>
                  </button>
                </div>
                <div class="col d-grid" *ngIf="files[i + 1].isRemoved">
                  <button
                    class="btn btn-sm btn-outline-color"
                    (click)="fileEmitter('recover', files[i + 1])"
                  >
                    Recuperar<i class="ms-1 bi bi-recycle"></i>
                  </button>
                </div>
              </div>
            </accordion-group>
          </accordion>
        </div>

        <div class="d-grid col m-1" *ngIf="i + 2 < files.length">
          <accordion [isAnimated]="true" class="text-truncate">
            <accordion-group>
              <button
                class="btn justify-content-between d-flex w-100 shadow-none"
                accordion-heading
                type="button"
              >
                <div class="text-color text-truncate pull-left float-left">
                  <i
                    *ngIf="files[i + 2].isRemoved"
                    class="bi bi-trash-fill me-1"
                  ></i
                  >{{ files[i + 2].name }}
                </div>
                <a
                  class="link-color icon-size"
                  href="{{ getFile(files[i + 2].name) }}"
                  ><i class="bi bi-cloud-arrow-down-fill"></i
                ></a>
              </button>
              <div class="row">
                <div class="col d-grid">
                  <a
                    href="{{ getFile(files[i + 2].name) }}"
                    class="btn btn-sm btn-outline-primary"
                    >Descargar<i class="ms-1 bi bi-cloud-arrow-down-fill"></i
                  ></a>
                </div>
                <div class="col d-grid">
                  <button
                    class="btn btn-sm btn-outline-success"
                    (click)="fileEmitter('edit', files[i + 2].name)"
                  >
                    Editar<i class="bi bi-pencil-fill ms-1"></i>
                  </button>
                </div>
                <div class="col d-grid">
                  <button
                    [disabled]="files[i + 2].isRemoved"
                    class="btn btn-sm btn-outline-color"
                    (click)="fileEmitter('delete', files[i + 2].name)"
                  >
                    Eliminar<i class="ms-1 bi bi-trash-fill"></i>
                  </button>
                </div>
                <div class="col d-grid" *ngIf="files[i + 2].isRemoved">
                  <button
                    class="btn btn-sm btn-outline-color"
                    (click)="fileEmitter('recover', files[i + 2])"
                  >
                    Recuperar<i class="ms-1 bi bi-recycle"></i>
                  </button>
                </div>
              </div>
            </accordion-group>
          </accordion>
        </div>
      </div>
    </div>
  </div>
</div>
