<div class="container-fluid">
  <div *ngIf="expanded" class="row p-2 g-0 overflow-hidden">
    <div class="row text-color">
      <p
        class="col-auto fw-bolder mb-2"
        data-bs-toggle="collapse"
        href="#filesCollapse"
        role="button"
        aria-expanded="true"
        aria-controls="filesCollapse"
        ngxTippy
        data-tippy-content="Click para desplegar o extender"
        [tippyProps]="tooltip"
      >
        Archivos {{ files.length }}
      </p>
    </div>
    <div
      id="filesCollapse"
      class="show"
      *ngFor="let file of files; let i = index"
    >
      <div *ngIf="i % 3 == 0" class="d-grid d-xl-flex justify-content-xl-end">
        <div class="d-grid col m-1" id="folder + i">
          <accordion [isAnimated]="true" class="text-truncate">
            <accordion-group>
              <div class="badge bg-secondary pull-left float-left mb-2">
                <i class="bi bi-gear-fill me-2"></i>Opciones de {{ file.name }}
              </div>
              <button
                class="btn justify-content-between d-flex w-100 shadow-none"
                accordion-heading
                type="button"
              >
                <div class="text-color text-truncate pull-left float-left">
                  {{ file.name }}
                </div>
                <a class="link-color icon-size" href="{{ getFile(file.name) }}"
                  ><i class="bi bi-cloud-arrow-down-fill"></i
                ></a>
              </button>
              <div class="row">
                <div class="col d-grid">
                  <a
                    href="{{ getFile(file.name) }}"
                    class="btn btn-sm btn-outline-primary"
                    ><i class="bi bi-cloud-arrow-down-fill"></i
                  ></a>
                  <span class="badge bg-primary mt-1">Descargar</span>
                </div>
                <div class="col d-grid">
                  <button
                    class="btn btn-sm btn-outline-success"
                    (click)="fileEmitter('edit', file.name)"
                  >
                    <i class="bi bi-pencil-fill"></i>
                  </button>
                  <span class="badge bg-success mt-1">Editar</span>
                </div>
                <div class="col d-grid">
                  <button
                    class="btn btn-sm btn-outline-color"
                    (click)="fileEmitter('delete', file.name)"
                  >
                    <i class="bi bi-trash-fill"></i>
                  </button>
                  <span class="badge bg-color mt-1">Eliminar</span>
                </div>
              </div>
            </accordion-group>
          </accordion>
        </div>

        <div class="d-grid col m-1" *ngIf="i + 1 < files.length">
          <accordion [isAnimated]="true" class="text-truncate">
            <accordion-group>
              <div class="badge bg-secondary pull-left float-left mb-2">
                <i class="bi bi-gear-fill me-2"></i>Opciones
                {{ files[i + 1].name }}
              </div>
              <button
                class="btn justify-content-between d-flex w-100 shadow-none"
                accordion-heading
                type="button"
              >
                <div class="text-color text-truncate pull-left float-left">
                  {{ files[i + 1].name }}
                </div>
                <a
                  class="link-color icon-size"
                  href="{{ getFile(files[i + 1].name) }}"
                  ><i class="bi bi-cloud-arrow-down-fill"></i
                ></a>
              </button>
              <div class="row">
                <div class="col d-grid">
                  <a
                    href="{{ getFile(files[i + 1].name) }}"
                    class="btn btn-sm btn-outline-primary"
                    ><i class="bi bi-cloud-arrow-down-fill"></i
                  ></a>
                  <span class="badge bg-primary mt-1">Descargar</span>
                </div>
                <div class="col d-grid">
                  <button
                    class="btn btn-sm btn-outline-success"
                    (click)="fileEmitter('edit', files[i + 1].name)"
                  >
                    <i class="bi bi-pencil-fill"></i>
                  </button>
                  <span class="badge bg-success mt-1">Editar</span>
                </div>
                <div class="col d-grid">
                  <button
                    class="btn btn-sm btn-outline-color"
                    (click)="fileEmitter('delete', files[i + 1].name)"
                  >
                    <i class="bi bi-trash-fill"></i>
                  </button>
                  <span class="badge bg-color mt-1">Eliminar</span>
                </div>
              </div>
            </accordion-group>
          </accordion>
        </div>

        <div class="d-grid col m-1" *ngIf="i + 2 < files.length">
          <accordion [isAnimated]="true" class="text-truncate">
            <accordion-group>
              <div class="badge bg-secondary pull-left float-left mb-2">
                <i class="bi bi-gear-fill me-2"></i>Opciones
                {{ files[i + 2].name }}
              </div>
              <button
                class="btn justify-content-between d-flex w-100 shadow-none"
                accordion-heading
                type="button"
              >
                <div class="text-color text-truncate pull-left float-left">
                  {{ files[i + 2].name }}
                </div>
                <a class="link-color icon-size"
                  href="{{ getFile(files[i + 2].name) }}"
                  ><i class="bi bi-cloud-arrow-down-fill"></i
                ></a>
              </button>
              <div class="row">
                <div class="col d-grid">
                  <a
                    href="{{ getFile(files[i + 2].name) }}"
                    class="btn btn-sm btn-outline-primary"
                    ><i class="bi bi-cloud-arrow-down-fill"></i
                  ></a>
                  <span class="badge bg-primary mt-1">Descargar</span>
                </div>
                <div class="col d-grid">
                  <button
                    class="btn btn-sm btn-outline-success"
                    (click)="fileEmitter('edit', files[i + 2].name)"
                  >
                    <i class="bi bi-pencil-fill"></i>
                  </button>
                  <span class="badge bg-success mt-1">Editar</span>
                </div>
                <div class="col d-grid">
                  <button
                    class="btn btn-sm btn-outline-color"
                    (click)="fileEmitter('delete', files[i + 2].name)"
                  >
                    <i class="bi bi-trash-fill"></i>
                  </button>
                  <span class="badge bg-color mt-1">Eliminar</span>
                </div>
              </div>
            </accordion-group>
          </accordion>
        </div>
      </div>
    </div>
  </div>
</div>
